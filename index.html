<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Ki·ªÉm k√™ t·ªìn kho</title>
<!-- iOS PWA -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Ki·ªÉm k√™ kho">

<!-- Android PWA -->
<meta name="mobile-web-app-capable" content="yes">

<!-- Icon -->
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" sizes="192x192" href="icon.png">

<!-- Splash background -->
<meta name="theme-color" content="#2f80ed">


<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto}
body{margin:0;background:#eef2f7}
.app{max-width:520px;margin:auto;min-height:100vh;padding-bottom:90px}
body {
    background: #2f80ed;
}

.header{
    background:linear-gradient(135deg,#2f80ed,#56ccf2);
    color:#fff;padding:16px;text-align:center;
    font-size:18px;font-weight:600;
    border-bottom-left-radius:20px;
    border-bottom-right-radius:20px
}

.actions{
    display:flex;gap:10px;padding:12px
}
.actions button{
    flex:1;padding:12px;border:none;border-radius:14px;
    font-size:14px;font-weight:600;color:#fff
}
.btn-prev{background:#0f766e}
.btn-lock{background:#a16207}

.card{
    background:#fff;margin:10px;border-radius:16px;
    padding:14px;box-shadow:0 6px 16px rgba(0,0,0,.08)
}
.name{font-weight:600;font-size:15px}
.unit{font-size:12px;color:#6b7280;margin-bottom:8px}

input{
    width:100%;padding:12px;border-radius:12px;
    border:1px solid #d1d5db;font-size:15px;text-align:center
}

.row{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:8px;
    margin-bottom:8px
}

.btn-add{
    background:#3b82f6;color:#fff;
    border:none;border-radius:14px;
    padding:12px;font-size:14px;
    font-weight:600;width:100%;
    margin-bottom:6px
}

.btn-refresh{
    background:#e5e7eb;color:#111827;
    border:none;border-radius:14px;
    padding:10px;font-size:13px;
    font-weight:600;width:100%
}

.modal{
    position:fixed;inset:0;background:rgba(0,0,0,.4);
    display:none;align-items:center;justify-content:center
}
.modal-box{
    background:#fff;width:92%;max-height:80%;
    border-radius:18px;padding:16px;overflow:auto
}
.modal h3{margin:0 0 10px}
.list div{
    display:flex;justify-content:space-between;
    padding:6px 0;border-bottom:1px dashed #ddd;
    font-size:14px
}

.toast{
    position:fixed;bottom:20px;left:50%;
    transform:translateX(-50%);
    background:#111827;color:#fff;
    padding:12px 18px;border-radius:14px;
    font-size:14px;display:none
}
</style>
</head>

<body>
<div class="app">
<div class="header">üì¶ Ki·ªÉm k√™ t·ªìn kho h√¥m nay</div>

<div class="actions">
    <button class="btn-prev" onclick="showPrev()">üìã T·ªìn h√¥m tr∆∞·ªõc</button>
    <button class="btn-lock" onclick="lockDay()">üîí Ch·ªët ng√†y</button>
</div>

<div id="items"></div>
</div>

<div class="modal" id="modal">
    <div class="modal-box">
        <h3>üì¶ T·ªìn kho ƒë√£ ch·ªët</h3>
        <div class="list" id="prevList"></div>
        <button class="btn-add" style="background:#ef4444" onclick="closeModal()">ƒê√≥ng</button>
    </div>
</div>

<div class="toast" id="toast"></div>

<script>
const items = [
["N∆∞·ªõc ch·∫•m","Kg"],["D∆∞a chua","T√∫i"],["T√©p m·ª°","Kg"],
["N∆∞·ªõc l√®o","N·ªìi"],["N∆∞·ªõc ch·∫•m 250G","H·ªôp"],
["Gia v·ªã s·ªët","G√≥i"],["M·∫≠t ong pha ch·∫ø","T√∫i"],
["M·ª±c size >9.5cm ƒëen","Kg"],["H·ªß ti·∫øu n∆∞·ªõc","C·ª•c"],
["T·ªèi phi","Kg"],["Caf√©","Kg"],["N∆∞·ªõc su·ªëi","Chai"],
["N∆∞·ªõc ng·ªçt","Chai"],["Cam t∆∞∆°i","Kg"],["Chanh","Kg"],
["Chanh d√¢y 4 m√πa","H·ªôp"],["M·ª±c ·ªëng size >22cm","Kg"],
["T√¥m h·∫•p 300gram","H·ªôp"],["T√¥m h·∫•p l·ªôt v·ªè (50c)","T√∫i"],
["Tr·ª©ng c√∫t","C√°i"],["H·ªß ti·∫øu kh√¥","C·ª•c"],
["Ti√™u","Kg"],["M·ª° (d·∫ßu)","Kg"],["H√†nh phi","Kg"],
["S·ªØa t∆∞∆°i","ML"],["S·ªØa ƒë·∫∑c","ML"],["Gi√°","Kg"],
["H√†nh l√°","Kg"],["·ªöt","Kg"],["Ng√≤ r√≠","Kg"],["T·∫ßn √¥","Kg"]
];

const container=document.getElementById("items");

items.forEach((i,idx)=>{
container.innerHTML+=`
<div class="card">
    <div class="name">${i[0]}</div>
    <div class="unit">ƒê∆°n v·ªã: ${i[1]}</div>

    <div class="row">
        <input id="expr${idx}" placeholder="VD: 40+50">
        <input id="total${idx}" placeholder="T·ªïng th·ª±c t·∫ø" readonly>
    </div>

    <button class="btn-add" onclick="calc(${idx})">‚ûï C·ªông v√†o t·ªïng</button>
    <button class="btn-refresh" onclick="resetItem(${idx})">üîÑ L√†m m·ªõi</button>
</div>`;
});

function calc(i){
    const expr=document.getElementById("expr"+i).value;
    try{
        const total=eval(expr)||0;
        document.getElementById("total"+i).value=total;
    }catch{
        toast("‚ùå D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá");
    }
}

function resetItem(i){
    document.getElementById("expr"+i).value="";
    document.getElementById("total"+i).value="";
}

function lockDay(){
    const data={
        date:new Date().toLocaleDateString("vi-VN"),
        items:{}
    };

    items.forEach((i,idx)=>{
        data.items[i[0]]={
            value:document.getElementById("total"+idx).value||0,
            unit:i[1]
        };
    });

    // ‚ùó GHI ƒê√à ‚Äì ch·ªâ l∆∞u l·∫ßn ch·ªët g·∫ßn nh·∫•t
    localStorage.setItem("TON_KHO_CHOT",JSON.stringify(data));
    toast("‚úÖ ƒê√£ ch·ªët t·ªìn kho ng√†y " + data.date);
}

function showPrev(){
    const data=JSON.parse(localStorage.getItem("TON_KHO_CHOT"));
    const list=document.getElementById("prevList");
    list.innerHTML="";
    if(!data){
        list.innerHTML="<i>Ch∆∞a c√≥ d·ªØ li·ªáu ch·ªët</i>";
    }else{
        Object.keys(data.items).forEach(k=>{
            const v=data.items[k];
            list.innerHTML+=`<div><span>${k}</span><b>${v.value} ${v.unit}</b></div>`;
        });
    }
    document.getElementById("modal").style.display="flex";
}

function closeModal(){
    document.getElementById("modal").style.display="none";
}

function toast(msg){
    const t=document.getElementById("toast");
    t.innerText=msg;
    t.style.display="block";
    setTimeout(()=>t.style.display="none",2500);
}
</script>
</body>
</html>
